name: Comment on PR Closure

on:
  pull_request_target:
    types:
      - closed

jobs:
  comment:
    runs-on: ubuntu-latest

    steps:
      - name: Check PR Merge Status
        id: pr_status
        run: echo "::set-output name=merged::${{ github.event.pull_request.merged }}"

      - name: Comment on PR Closure
        if: steps.pr_status.outputs.merged == 'true'
        uses: actions/github-script@v4
        with:
          github-token: ${{ secrets.APIVerse_SECRET }}
          script: |
            const { owner, repo, number } = context.issue;
            const commentAuthor = context.payload.pull_request.user.login;
            const commentBody = `@${ commentAuthor } We're thrilled to inform you that your pull request has been successfully merged into the APIverseüöÄüéÅ
            Your hard work, dedication, and expertise have made a significant impact on our project, and we couldn't be more grateful for your contributions.üòá
            Your code will now be a part of our growing ecosystem, helping developers worldwide to create exceptional APIs.‚ù£Ô∏èüî•
            Happy Coding! ‚ú®
            Will See you soon‚ù£Ô∏è`;
            await github.issues.createComment({ owner, repo, issue_number: number, body: commentBody });
            console.log(`Commented on the closed PR: ${commentBody}.`);
        
      - name: Comment on PR Closure
        if: steps.pr_status.outputs.merged != 'true'
        uses: actions/github-script@v4
        with:
          github-token: ${{ secrets.APIVerse_SECRET }}
          script: |
            const { owner, repo, number } = context.issue;
            const commentAuthor = context.payload.pull_request.user.login;
            const commentBody = `@${ commentAuthor } ,I wanted to reach out and let you know that we have decided to close your pull request.üôá
            
            In case of any issues, you can contact us on [Discord](https://discord.gg/mv4NTzN).
            Thank you! ‚ù£Ô∏è
            Happy Coding! ‚ú®
            Will See you soon‚ù£Ô∏è`;
            await github.issues.createComment({ owner, repo, issue_number: number, body: commentBody });
            console.log(`Commented on the closed PR: ${commentBody}.`);
