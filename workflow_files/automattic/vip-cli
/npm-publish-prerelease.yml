name: Publish prerelease to npm

on:
  workflow_dispatch:
    inputs:
      npm_tag:
        description: 'NPM tag for prerelease'
        default: 'next'

jobs:
  publish:
    name: Publish prerelease
    runs-on: ubuntu-latest
    permissions:
      contents: write
      id-token: write
      pull-requests: write
    steps:
      - uses: Automattic/vip-actions/npm-publish-prerelease@1137b91acf0f5ea4e0db044bcf14ceabed9b068f # trunk
        with:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
          PROVENANCE: 'true'
          NPM_TAG: ${{ inputs.npm_tag }}
