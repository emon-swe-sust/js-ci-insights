name: build-dev-image

on:
  push:
    branches-ignore:
    - 'development/**'

jobs:
  build-base:
    uses: scality/workflows/.github/workflows/docker-build.yaml@v2
    with:
      namespace: ${{ github.repository_owner }}
      name: ${{ github.event.repository.name }}

  build-svc-base:
    needs: build-base
    uses: scality/workflows/.github/workflows/docker-build.yaml@v2
    with:
      namespace: ${{ github.repository_owner }}
      name: ${{ github.event.repository.name }}
      context: .
      file: images/nodesvc-base/Dockerfile
      tag: ${{ github.sha }}-svc-base
      build-args: |
        UTAPI_VERSION=${{ github.sha }}
